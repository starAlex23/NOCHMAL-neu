<!DOCTYPE html>
<html lang="de" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zeiterfassung - SIR Services</title>
  <style>
    /* Hier kannst du CSS erg√§nzen */
  </style>
</head>
<body>

<header role="banner">
  <img src="/assets/logo.svg" alt="SIR Logo" width="48" height="48" />
  <h1>Zeiterfassung</h1>
</header>

<main role="main" aria-live="polite">

  <!-- 1. QR Code Scanner -->
  <section id="qr-section" class="card" aria-label="QR Code Scanner">
    <h2>QR-Code scannen</h2>
    <div id="qr-reader" style="width:100%"></div>
    <p id="qr-message"></p>
  </section>

  <!-- 2. Login -->
  <section id="login-section" class="card hidden" aria-label="Login Formular">
    <h2>Login</h2>
    <form id="login-form" novalidate>
      <label for="login-email">E-Mail</label>
      <input type="email" id="login-email" name="email" required autocomplete="email" />

      <label for="login-password">Passwort</label>
      <input type="password" id="login-password" name="password" required autocomplete="current-password" />

      <button id="activate-biometric" type="button">üîê Biometrie aktivieren</button>

      <button type="submit">Einloggen</button>
    </form>
    <div class="link">
      Noch keinen Account? <button id="show-register-btn" type="button">Jetzt registrieren</button>
    </div>
    
    <p id="login-error" class="error-message"></p>
  </section>

  <!-- 3. Registrierung -->
  <section id="register-section" class="card hidden" aria-label="Registrierung Formular">
    <h2>Registrieren</h2>
    <form id="register-form" novalidate>
      <label for="register-firstname">Vorname</label>
      <input type="text" id="register-firstname" name="firstname" required autocomplete="given-name" />
      
      <label for="register-lastname">Nachname</label>
      <input type="text" id="register-lastname" name="lastname" required autocomplete="family-name" />

      <label for="register-email">E-Mail</label>
      <input type="email" id="register-email" name="email" required autocomplete="email" />

      <label for="register-password">Passwort</label>
      <input type="password" id="register-password" name="password" required autocomplete="new-password" />

      <button type="submit">Registrieren</button>
    </form>
    <div class="link">
      Schon einen Account? <button id="show-login-btn" type="button">Jetzt einloggen</button>
    </div>
    
    <button id="registerWebAuthn" type="button">WebAuthn registrieren</button>
    <button id="loginWebAuthn" type="button">Mit WebAuthn anmelden</button>
  </section>

  <!-- 4. Zeiterfassung -->
  <section id="time-tracking-section" class="card hidden" aria-label="Zeiterfassung">
    <h2>Willkommen, <span id="user-name"></span></h2>
    
    <button id="clock-in-btn" type="button">Einstechen (Start)</button>
    <button id="clock-out-btn" type="button" disabled>Ausstechen (Stop)</button>

    <p id="time-message"></p>

    <button id="logout-btn" type="button" style="margin-top:2rem; background:#e74c3c; color:#fff;">Ausloggen</button>
  </section>

</main>

<button id="theme-switcher" aria-label="Theme wechseln" type="button">üåô</button>

<script src="https://unpkg.com/html5-qrcode"></script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    if (typeof startWebAuthnRegistration === 'function') {
      document.getElementById('registerWebAuthn').onclick = startWebAuthnRegistration;
    }
    if (typeof startWebAuthnLogin === 'function') {
      document.getElementById('loginWebAuthn').onclick = startWebAuthnLogin;
    }
  });
</script>

<script src="main.js"></script>
</body>
</html>
